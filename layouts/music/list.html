{{ define "content" }}
<div class="post-warp music-landing">
    <header class="post-header">
        <h1 class="post-title">{{ .Title }}</h1>
        {{ with .Params.description }}
        <p class="post-subtitle">{{ . }}</p>
        {{ end }}
    </header>

    {{ with .Content }}
    <div class="post-content">
        {{ . }}
    </div>
    {{ end }}

    <section class="archive">
        {{ $pages := .Pages.ByPublishDate.Reverse }}
        {{ if $pages }}
            {{ range $pages }}
            {{ $page := . }}
            <article class="archive-item music-card">
                <div class="music-card-inner">
                    {{ with $page.Params.cover }}
                    <div class="music-cover">
                        <a href="{{ $page.RelPermalink }}">
                            <img src="{{ . | relURL }}" alt="{{ $page.Title }} cover art">
                        </a>
                    </div>
                    {{ end }}

                    <div class="music-meta">
                        <h2 class="archive-item-title">
                            <a href="{{ $page.RelPermalink }}">{{ $page.Title }}</a>
                        </h2>
                        {{ with $page.Params.description }}
                        <p class="music-description">{{ . }}</p>
                        {{ else }}
                        <p class="music-description">{{ $page.Summary | plainify }}</p>
                        {{ end }}

                        {{ with $page.Params.platforms }}
                        <div class="music-platforms">
                            {{ range . }}
                            {{ if and (isset . "name") (isset . "url") }}
                            <a class="music-platform-link" href="{{ .url }}" target="_blank" rel="noopener">
                                {{ .name }}
                            </a>
                            {{ end }}
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </div>
            </article>
            {{ end }}
        {{ else }}
        <p>Ready when you areâ€”add a markdown file in <code>content/music</code> and Hugo will list it here.</p>
        {{ end }}
    </section>
</div>
{{ end }}
